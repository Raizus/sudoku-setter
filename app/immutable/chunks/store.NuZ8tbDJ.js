import{h as m,i as o,k as A,Z as I,H as N,o as R,j as k,q as d,v as h,w as v,x as g,u as q,a7 as x,aq as S,M as w,n as p,b as D,a5 as F,a8 as H}from"./utils.RIT-VyeY.js";function Z(s,a,t=!1){o&&A();var e=s,n=null,r=null,f=x,y=t?I:0,l=!1;const T=(c,i=!0)=>{l=!0,_(i,c)},_=(c,i)=>{if(f===(f=c))return;let b=!1;if(o){const E=e.data===N;!!f===E&&(e=R(),k(e),d(!1),b=!0)}f?(n?h(n):i&&(n=v(()=>i(e))),r&&g(r,()=>{r=null})):(r?h(r):i&&(r=v(()=>i(e))),n&&g(n,()=>{n=null})),b&&d(!0)};m(()=>{l=!1,a(T),l||_(null,null)},y),o&&(e=q)}let u=!1;function j(s,a,t){const e=t[a]??(t[a]={store:null,source:w(void 0),unsubscribe:p});if(e.store!==s)if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=p;else{var n=!0;e.unsubscribe=D(s,r=>{n?e.source.v=r:F(e.source,r)}),n=!1}return H(e.source)}function C(s,a){return s.set(a),a}function M(){const s={};return S(()=>{for(var a in s)s[a].unsubscribe()}),s}function O(){u=!0}function P(s){var a=u;try{return u=!1,[s(),u]}finally{u=a}}export{j as a,C as b,P as c,Z as i,O as m,M as s};
