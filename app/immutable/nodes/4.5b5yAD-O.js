import{H as u}from"../chunks/control.CYgJF_JY.js";import{b as c}from"../chunks/paths.cfvHbpWZ.js";import{d,a as p,t as v}from"../chunks/disclose-version.BMjGnY8r.js";import{i as _}from"../chunks/legacy.CBYIjwbu.js";import{p as w,f as g,a as h,Z as l,_ as b,$ as y}from"../chunks/utils.Bp9j5Uj0.js";import{i as S}from"../chunks/store.D4OU4dvo.js";import{p as P}from"../chunks/props.DtgsZciY.js";import{o as j}from"../chunks/index-client.BnGHJMPg.js";import{p as x,s as E,r as k,G as O}from"../chunks/Game.BZfZ3Lzx.js";function i(r,e){throw new u(r,e)}new TextEncoder;const F=async({params:r,fetch:e})=>{const{puzzleId:o}=r;try{const t=await e(`${c}/puzzles/${o}.json`);if(!t.ok)throw i(404,`Puzzle "${o}" not found`);const s=await t.text(),n=JSON.parse(s);return{puzzle:{id:o,data:n}}}catch(t){throw t instanceof SyntaxError?i(500,`Invalid puzzle format for ${o}`):i(500,t instanceof Error?t.message:"Unknown error")}},D=Object.freeze(Object.defineProperty({__proto__:null,load:F},Symbol.toStringTag,{value:"Module"}));var G=v("<div>Loading puzzle...</div>");function L(r,e){w(e,!1);let o=P(e,"data",8),t=y(!1);j(()=>{if(!l(t))try{const a=x(o().puzzle.data);requestAnimationFrame(()=>{E(a),k(),b(t,!0)})}catch(a){console.error("Puzzle initialization failed:",a)}}),_();var s=d(),n=g(s);{var m=a=>{O(a,{})},f=a=>{var z=G();p(a,z)};S(n,a=>{l(t)?a(m):a(f,!1)})}p(r,s),h()}export{L as component,D as universal};
